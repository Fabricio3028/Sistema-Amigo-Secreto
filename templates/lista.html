<!DOCTYPE html>
<html>
<head>
    <title>üéÅ Amigo Secreto Natal 2025 Tia Rose üéÅ</title>
    <meta charset="utf-8">
    <style>
        body { font-family: 'Segoe UI', Arial, sans-serif; background: linear-gradient(135deg, #f7cac9, #b3b6ea); margin: 0; padding: 0; min-height: 100vh;}
        .container { max-width: 700px; margin: 40px auto; background: #fff; border-radius: 18px; box-shadow: 0 4px 20px #92a8d166; padding: 32px 36px 38px 36px;}
        h2 { color: #d83367; text-align: center; font-size: 2.2em; margin-bottom: 10px;}
        ul { list-style: none; padding: 0; margin-top: 32px;}
        li { margin: 14px 0; font-size: 1.16em; background: #f7cac944; border-radius: 10px; padding: 12px; box-shadow: 0 2px 8px #92a8d149; display: flex; flex-direction:column;}
        a { color: #d83367; font-weight: bold; text-decoration: none; word-break: break-all; margin-bottom: 8px;}
        a:hover { text-decoration: underline; color: #1b9aaa; }
        .btn-whats {background: #25d366 !important; color: #fff !important; border:none; border-radius: 6px; padding: 7px 16px; cursor:pointer; margin-top: 3px; width: fit-content; font-size:1em; font-weight:bold; display:inline-block; text-decoration:none;}
        .btn-whats:hover {background: #1b9aaa !important;}
        button.copiar {background: #d83367; color: #fff; border:none; border-radius:6px; font-weight:bold; padding:7px 16px; cursor:pointer; margin-top: 5px;}
        button.copiar:hover {background: #25d366;}
        button.refazer {background: #d83367; margin-bottom: 24px; padding: 10px 26px; font-size:1.1em; color: #fff; font-weight:bold; border:none; border-radius:6px; cursor:pointer;}
        button.refazer:hover {background: #1b9aaa;}
        .footer {text-align: center; margin-top: 24px; color: #555; font-size: 0.98em;}
        .dev { color:#333; font-size:1em; margin-top: 10px; font-weight: bold;}
        .logo {text-align: center; margin-top: 15px;}
        .logo img { width: 80px; border-radius: 40px; border:3px solid #d83367; margin-bottom: 6px;}
        .event { color:#1b9aaa; font-weight: bold; font-size: 1.13em; margin-bottom: 7px; text-align:center; }
    </style>
</head>
<body>
    <div class="container">

        <div style="display:flex; flex-wrap:nowrap; gap:10px; align-items:stretch; justify-content:center; margin-bottom:18px;">
            <a href="/restricoes" style="background:#1b9aaa; color:#fff; border:none; border-radius:6px; padding:10px 22px; font-size:1.1em; font-weight:bold; text-decoration:none; margin-right:18px; height:44px; display:flex; align-items:center;">‚öôÔ∏è Restri√ß√µes</a>
            <form method="POST" style="display:flex; flex-wrap:nowrap; gap:10px; align-items:stretch;">
                <input type="text" name="novo_nome" placeholder="Adicionar novo participante" style="padding:0 12px; border-radius:6px; border:1px solid #ccc; font-size:1.1em; min-width:220px; max-width:320px; height:44px;" required>
                <button type="submit" style="background:#25d366; color:#fff; border:none; border-radius:6px; padding:0 18px; font-size:1.1em; font-weight:bold; cursor:pointer; height:44px; min-width:120px;">‚ûï Adicionar</button>
            </form>
        </div>

        <h2>üéÅ Amigo Secreto Natal 2025 Tia Rose üéÅ</h2>
        <div class="event">Data: 24/12/2025 ‚Ä¢ Fam√≠lia Tia Rose</div>
        <div style="text-align:center; font-size:1.15em; color:#1b9aaa; margin-bottom:10px; font-weight:bold;">
            Participantes: {{ participantes|length }}
        </div>
        <ul>
            {% for nome in participantes %}
            <li>
                <span>üë§ <b>{{ nome }}</b>:</span>
                {% if links[nome] %}
                <a href="{{ request.url_root }}{{ links[nome] }}" target="_blank">
                    {{ request.url_root }}{{ links[nome] }}
                </a>
                <button class="copiar" onclick="copyToClipboard('{{ request.url_root }}{{ links[nome] }}', this); return false;">üì• Copiar</button>
                <a href="https://wa.me/?text=Ol√°!%20Seu%20link%20do%20Amigo%20Secreto%20√©:%20{{ request.url_root }}{{ links[nome] }}" class="btn-whats" target="_blank">Enviar no WhatsApp</a>
                <form method="POST" style="margin-top:8px;">
                    <input type="hidden" name="remover_nome" value="{{ nome }}">
                    <button type="submit" style="background:#d83367; color:#fff; border:none; border-radius:6px; padding:6px 16px; font-size:1em; font-weight:bold; cursor:pointer; margin-top:2px;">üóëÔ∏è Remover</button>
                </form>
                {% else %}
                <span style="color:#aaa;">(vaga dispon√≠vel)</span>
                {% endif %}
            </li>
            {% endfor %}
        </ul>
        <div class="footer">
            <hr>
            <small>Copie e envie o link ou clique WhatsApp para compartilhar.<br>Cada participante s√≥ v√™ seu sorteado!</small>
            <br>
            <span class="dev">Desenvolvido por Fabricio Castanheiro</span>
        </div>
    </div>
    <audio id="bgMusic" src="https://cdn.pixabay.com/audio/2022/07/26/audio_124b1a5d6a.mp3" autoplay loop></audio>
        <script>
        function copyToClipboard(text, btn) {
            if (navigator.clipboard && window.isSecureContext) {
                navigator.clipboard.writeText(text).then(function() {
                    btn.innerText = '‚úÖ Copiado!';
                    setTimeout(() => btn.innerText = 'üì• Copiar', 1300);
                }, function() {
                    fallbackCopy(text, btn);
                });
            } else {
                fallbackCopy(text, btn);
            }
        }

        function fallbackCopy(text, btn) {
            var tempInput = document.createElement('input');
            tempInput.value = text;
            document.body.appendChild(tempInput);
            tempInput.select();
            tempInput.setSelectionRange(0, 99999); // Para mobile
            try {
                document.execCommand('copy');
                btn.innerText = '‚úÖ Copiado!';
            } catch (err) {
                btn.innerText = '‚ùå Erro ao copiar';
            }
            setTimeout(() => btn.innerText = 'üì• Copiar', 1300);
            document.body.removeChild(tempInput);
        }
        </script>
</body>
</html>